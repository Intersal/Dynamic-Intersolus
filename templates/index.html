<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Intersolus</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}" />
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='icon.png') }}">
</head>
<body>
    <div class="header-content">
    <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo">
    </div>

    <div class="view-options">
        <button onclick="setView('grid')"><img src="{{ url_for('static', filename='gridview.png') }}" width="24" height="24"></button>
        <button onclick="setView('list')"><img src="{{ url_for('static', filename='listview.png') }}" width="24" height="24"></button>
    </div>

    <div id="album-container" class="view-grid">

    {% for album in albums %}
        <div class="album" onclick="toggleAlbum(this)">
            <h2>{{ album.artist }} - {{ album.album }}</h2>
            
            {% if album.cover %}
                <img src="{{ url_for('static', filename=album.cover) }}" alt="Album cover" class="Albumcover">
            {% else %}
                <img src="{{ url_for('static', filename='placeholder.png') }}" alt="No cover" class="Albumcover">
            {% endif %}
            
            <div class="arrow">â–¼</div>
            
            <ul class="track-list">
            {% for track in album.tracks %}
                <li onclick="event.stopPropagation()">
                    <span class="track-title">{{ track.title }}</span>
                    <audio controls>
                        <source src="{{ url_for('music', filename=track.path) }}">
                    </audio>
                    <a href="{{ url_for('download_track', filename=track.path) }}">
                        <img src="{{ url_for('static', filename='download.png') }}" alt="Download">
                    </a>
                </li>
            {% endfor %}
            </ul>
        </div>
    {% endfor %}

    </div> 

    <script>
        function toggleAlbum(element) {
            element.classList.toggle("open");
        }
        function setView(viewType) {
            const container = document.getElementById('album-container');
            if (!container) {
                console.error("Album container not found!");
                return;
            }
            if (viewType === 'grid') {
                container.classList.remove('view-list');
                container.classList.add('view-grid');
            } else if (viewType === 'list') {
                container.classList.remove('view-grid');
                container.classList.add('view-list');
            }
        }
    </script>
</body>
</html>